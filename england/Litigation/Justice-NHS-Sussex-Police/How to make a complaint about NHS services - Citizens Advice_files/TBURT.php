function RunEngage158(){}var intMappingHasStarted = 0;function setLGNCookie(c_name,value,exdays,path){var exdate=new Date();exdate.setDate(exdate.getDate() + exdays);var c_value=escape(value) + ((path == "") ? "; path=/" : "; path=" + path) + ((exdays==0) ? "" : "; expires="+exdate.toUTCString());document.cookie=c_name + "=" + c_value;}function getLGNCookie(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for (i=0;i<ARRcookies.length;i++){ARRparts=ARRcookies[i].split("=");x=ARRparts[0];y=ARRparts[1];x=x.replace(/^\s+|\s+$/g,"");if(x.indexOf(c_name) > -1){return unescape(y);}}}var lgnid = 0;var intCountStartDisplays = 0;var intFound = 0;var intChosen = 0;var intSetCookie = 1;var lgnCSC=getLGNCookie("_lgn_cscv2");if(lgnCSC!=null && lgnCSC!=""){intSetCookie = 1;var arrCookBits = lgnCSC.split("^");lgnid = arrCookBits[0];intCountStartDisplays = arrCookBits[1];if(intCountStartDisplays == "undefined" || intCountStartDisplays == "NaN" ){intCountStartDisplays = 0;};intChosen = arrCookBits[2];if(intChosen == "undefined" || intChosen == "NaN" ){intChosen = 0;};}else{var T = new Date();lgnid = "36"+T.getTime();}var intUseMode=1;var intSecsSinceKeyPress=5;var intTotalUseMode=0;var intAverageUseMode=0;var strBuiltString="";var intCurrentUseMode = 1;var intLoops = 0;function DetectAndSetUseMode(){;var intInPeriodTravel = 0;intSecsSinceKeyPress = intSecsSinceKeyPress + 1;var intSwimmingModeValid = 1;var intDivingModeValid = 1;var intDeepDivingModeValid = 1;var FullSigParts = strBuiltString.split(",");for(i = FullSigParts.length - 3; i < FullSigParts.length - 1; i++){if(i > -1){var UnitSigParts = FullSigParts[i].split("|");var intMouseTravel = UnitSigParts[1];var intScrollBits = UnitSigParts[2].split(".");var intXScroll = intScrollBits[0];var intYScroll = intScrollBits[1];var intScrollTravel = intScrollBits[3];var intAllTravel = intScrollTravel+intMouseTravel;intInPeriodTravel = intInPeriodTravel+intAllTravel;if(intXScroll < 1 && intYScroll < 1 ){intDeepDivingModeValid = 0;}if(intMouseTravel > 20 || intScrollTravel > 120){intDivingModeValid = 0;intDeepDivingModeValid = 0;}if(intMouseTravel > 120 || intScrollTravel > 250){intSwimmingModeValid = 0;}if(intAllTravel > 0){intCurrentUseMode = 2;}}}if(intInPeriodTravel < 5){intSwimmingModeValid = 0;intDivingModeValid = 0;intDeepDivingModeValid = 0;}if(intSwimmingModeValid == 1){intCurrentUseMode = 3;}if(intDivingModeValid == 1){intCurrentUseMode = 4;}if(intDeepDivingModeValid == 1){intCurrentUseMode = 5;}if(intSecsSinceKeyPress < 5){intCurrentUseMode = 6;}intTotalUseMode=intTotalUseMode + intCurrentUseMode;intAverageUseMode=intTotalUseMode / intLoops;if(intUseMode < intCurrentUseMode){intUseMode=intCurrentUseMode;}}function StartLGNMapping(){intMappingHasStarted = 1;TrackImage = new Image();var intDWidth = jQuery(document).width();var intDheight = jQuery(document).height();var intLastX=0;var intLastY=0;var intLastScrollX=0;var intLastScrollY=0;var xpos,ypos;var intDocWidth = jQuery(document).width();jQuery(document).mousemove(function(e){xpos=Math.round(e.pageX);ypos=Math.round(e.pageY);});jQuery("body").bind("keypress", function (e) {intSecsSinceKeyPress = 0;});jQuery(window).unload(function(){var strValToStore = lgnid+"^"+intCountStartDisplays+"^"+intChosen;var path = "";if(intSetCookie == 1){setLGNCookie("_lgn_cscv2",strValToStore,360,path);}var strBugSource = "https://cita.logo-net.co.uk/Log/Track/LGNref.php?SID=85&PURL=https://www.citizensadvice.org.uk/health/nhs-and-social-care-complaints/complaining-about-the-nhs/nhs-complaints-procedure/how-to-make-a-complaint-about-nhs-services/&PID=0&LID=0&DID=158&CID=0&CRID=0&CTXID=103&BTYP=0&FTYP=0&CURTS=0|0&CCS=00|00&GEP=&TMK=0&G=&PCLID=761653&LOCREF=NONE";strBugSource = strBugSource+"&lgn_csc="+strValToStore;var strSaveString = strBuiltString+"^"+intLoops+"^"+intDocWidth;strBugSource = strBugSource + "&LOGAM=" + strSaveString + "&STRT=2017-11-11 00:02:17&DW="+intDWidth+"&DH="+intDheight;strBugSource = strBugSource + "&AUM=" + intAverageUseMode + "&MUM=" + intUseMode + "&TUM=" + intTotalUseMode;var intWindowWidth = jQuery(window).width();var pageTitle = escape(document.title);strBugSource = strBugSource + "&VW=" + intWindowWidth + "&TOAP=" + intLoops;strBugSource = strBugSource + "&pageTitle=" + pageTitle ;TrackImage.src = strBugSource;});var intForCount=0;setInterval(function(){var intZero=0;var intXscroll = jQuery(window).scrollLeft();var intYscroll = jQuery(window).scrollTop();var intXScrollTravel=intXscroll - intLastScrollX;if(intXScrollTravel < intZero){intXScrollTravel = intLastScrollX - intXscroll;}var intYScrollTravel = intYscroll - intLastScrollY;if(intYScrollTravel  < intZero){intYScrollTravel = intLastScrollY - intYscroll;}var intTotalScrollTravel=intXScrollTravel + intYScrollTravel;var intWWidth = jQuery(window).width();var strScrollString = intXscroll+'.'+intYscroll+'.'+intWWidth+'.'+intTotalScrollTravel;intLastScrollX = intXscroll;intLastScrollY = intYscroll;var intXTravel=xpos - intLastX;if(intXTravel < intZero){intXTravel = intLastX - xpos;}var intYTravel = ypos - intLastY;if(intYTravel  < intZero){intYTravel = intLastY - ypos;}var intTotalTravel = intYTravel + intXTravel;var strToAdd = xpos+'.'+ypos+'|'+intTotalTravel+'|'+strScrollString+'|'+intCurrentUseMode+',';intLastX = xpos;intLastY = ypos;intLoops = intLoops + 1;if(intLoops < 181){strBuiltString = strBuiltString+strToAdd;}DetectAndSetUseMode();}, 1000);}var intForceJqueryLoad = 0;try {var intDWidth = jQuery(document).width();}catch(err) {intForceJqueryLoad = 1;}if(typeof jQuery == "undefined" || intForceJqueryLoad == 1){var fileref=document.createElement('script');fileref.setAttribute("type","text/javascript");fileref.setAttribute('src', 'https://code.jquery.com/jquery-1.7.2.min.js');fileref.setAttribute('onload', 'StartLGNMapping()');document.getElementsByTagName("head")[0].appendChild(fileref);setTimeout(function(){if(typeof jQuery == "undefined"){}else{if(intMappingHasStarted == 0){StartLGNMapping();}}}, 3000);}else{StartLGNMapping();}; if(document.getElementById('agilisys-engage-webchat')) document.getElementById('agilisys-engage-webchat').innerHTML = '';