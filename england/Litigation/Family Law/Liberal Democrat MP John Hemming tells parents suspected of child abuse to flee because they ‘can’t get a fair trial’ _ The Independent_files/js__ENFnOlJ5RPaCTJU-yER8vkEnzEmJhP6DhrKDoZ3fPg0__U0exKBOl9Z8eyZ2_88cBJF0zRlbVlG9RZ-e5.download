/* Source and licensing information for the line(s) below can be found at http://www.independent.co.uk/sites/all/themes/ines_themes/ines_theme/js/main.js. */
function throttle(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=+new Date(),h=arguments;d&&g<d+b?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}}
function pluralize(a,b){return parseInt(a)>1?b+"s":b}
function removeExistingQuerystring(a){if("undefined"!=typeof a)return a.split("?")[0]}
function abbrNum(a,b){b=Math.pow(10,b);for(var c=["K","M","B","T"],d=c.length-1;d>=0;d--){var e=Math.pow(10,3*(d+1));if(e<=a){a=Math.round(a*b/e)/b,1e3==a&&d<c.length-1&&(a=1,d++),a+=c[d];break}};return a}
function referenceS3Location(a){if(a.indexOf("/s3/files/")>-1){var b,c,d,e=window.location.href,f=e.split("/"),g=f[0]+"//"+f[2];b=g.indexOf("cms.")>-1?"http://static.":g.indexOf("uat.")>-1||g.indexOf("uat-origin.")>-1?"http://static-uat.":"http://static-dev.",c=g.indexOf("homesandproperty")>-1?"homesandproperty.co.uk":g.indexOf("standard")>-1?"standard.co.uk":"independent.co.uk",d=b+c,a=a.replace(g+"/s3/files/styles/story_medium/public",d+"/s3fs-public")};return a}
function createCookie(a,b,c){var d;if(c){var e=new Date();e.setTime(e.getTime()+24*c*60*60*1e3),d="; expires="+e.toGMTString()}else d="";document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+d+"; path=/"}
function getCookie(a){var b="; "+document.cookie,c=b.split("; "+a+"=");if(2==c.length)return c.pop().split(";").shift()}
function videoPlayerToggle(a){for(var b=Object.keys(videojs.players),c=b.length-1;c>=0;c--)b[c]===a&&b.splice(c,1);for(var c=0;c<b.length;c++)videojs(b[c]).pause(),videojs(b[c]).ima3.adPlayer.pause()}
function videoPlayerEvent(a){videojs(a).on("play",function(){videoPlayerToggle(a)})};var cache={supports:{}};cache.supports.localstorage=function(){var a="test";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return!1}}(),jQuery(document).ready(function(a){a("body.search-results .pager .text-link").on("click",function(b){b.preventDefault(),a('#content input[type="search"]').focus()})}),function(a,b,c,d){b.behaviors.grid={editor_mode:!1,wrapped_by_ads:!1,throttled_recalculate:throttle(function(){b.behaviors.grid.recalculate()},250),attach:function(){var d=c.location.href;d.indexOf("taxonomy/term")>-1&&d.indexOf("/layout")>-1&&(b.behaviors.grid.editor_mode=!0),a("body.section").length>0&&(b.behaviors.grid.get_grid_from_dom(),b.behaviors.grid.recalculate(),c.addEventListener?c.addEventListener("resize",b.behaviors.grid.throttled_recalculate,!1):c.attachEvent("resize",b.behaviors.grid.throttled_recalculate))},update_breakpoints:function(){var a=d.documentElement.clientWidth;if("undefined"!=typeof d.getElementsByTagName("body")[0])var c=d.getElementsByTagName("body")[0].className.indexOf("wrapped_by_ads")>=0;"undefined"!=typeof c&&(a>=1240&&!c?b.behaviors.grid.weight_per_row=4:a>=930?b.behaviors.grid.weight_per_row=3:a>=620?b.behaviors.grid.weight_per_row=2:b.behaviors.grid.weight_per_row=1)},get_grid_from_dom:function(){b.behaviors.grid.rows=[];var a,c=d.querySelectorAll(".row");for(r=0,s=c.length;r<s;r++)for(b.behaviors.grid.rows.push([]),a=c[r].querySelectorAll("article"),m=0,n=a.length;m<n;m++)b.behaviors.grid.rows[r].push([]),b.behaviors.grid.rows[r][m]={dom:a[m],original_weight:parseInt(a[m].getAttribute("data-weight"))||1,locked:"true"===a[m].getAttribute("data-locked")}},recalculate:function(){if("undefined"!=typeof b.behaviors.grid.rows)for(b.behaviors.grid.update_breakpoints(),r=0,s=b.behaviors.grid.rows.length;r<s;r++)b.behaviors.grid.fit_row(b.behaviors.grid.rows[r])},get_row_weights:function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)"original"===b?c.push(a[d].original_weight):c.push(a[d].calculated_weight);return c},grow_weights:function(a){for(var c=b.behaviors.grid.get_row_weights(a,"original"),d=Math.max.apply(Math,c),e=0,f=a.length;e<f;e++)if(a[e].original_weight===d&&!a[e].locked){c[e]++;break};return c},apply_weights_to_row:function(a,c){for(var e,f=0,g=a.length;f<g;f++){e=a[f],"original"===c?e.calculated_weight=e.original_weight:e.calculated_weight=c[f];var h="weight-"+(e.calculated_weight||e.original_weight);e.dom.className=e.dom.className.replace(/weight-\d+/,h)};d.getElementById("content").className="weight_per_row_"+b.behaviors.grid.weight_per_row},fit_row:function(a){var c=a.length;if(!(c<1)){var d=a[0].locked,e=a[c-1].locked,f=[b.behaviors.grid.weight_per_row];switch(b.behaviors.grid.weight_per_row){case 4:f="original";break;case 3:4===c?f=d||e?[1,2,2,1]:[2,1,1,2]:3===c?f=[1,1,1]:2===c&&(f=d||1===a[0].original_weight?[1,2]:[2,1]);break;case 2:4===c?f=[1,1,1,1]:3===c?f=d&&e?[1,1,1]:d||a[2].original_weight>1?[1,1,2]:[2,1,1]:2===c&&(f=[1,1]);break;case 1:f=[1,1,1,1]};b.behaviors.grid.apply_weights_to_row(a,f)}}}}(jQuery,Drupal,this,this.document),jQuery(document).ready(function(a){function b(){e=new Date();var b=0;a(".years li.expanded ol.months > li:nth-child("+(e.getMonth()+1)+")").addClass("current-month"),a(".years li.expanded .months .current-month li").each(function(c){""!=a(this).html()&&(b++,b>e.getDate()&&(a(this).addClass("disabled"),a(this).html(b)))})};document.location.href.indexOf("archive")>-1&&b();throttle(function(){if(document.documentElement.clientWidth<930&&!cache.$article_sidebar.hasClass("always-shown")){var b={display:"",right:"",position:"",top:""};cache.$article_sidebar.css(b);for(var c=0;c<cache.$article_sidebar_asides.length;c++)cache.$article_sidebar_asides.eq(c).removeClass("visible")}else{var d=window.innerHeight-68,e=-1,f=a(window).scrollTop();cache.scroll_top=f;for(var g=cache.$article_text_wrappers.length-1;g>=0;g--){var h=cache.$article_text_wrappers.eq(g),i=h.offset().top,j=h.height();e=g;break};if(e!==-1){var k=d;e===cache.$article_text_wrappers.length-1&&(k=j);for(var l=0,c=0;c<cache.$article_sidebar_asides.length;c++)l+cache.$article_sidebar_asides.eq(c).height()<=k?(cache.$article_sidebar_asides.eq(c).addClass("visible"),0!==l&&(l+=40),l+=cache.$article_sidebar_asides.eq(c).height()):cache.$article_sidebar_asides.eq(c).removeClass("visible");var b={display:"block",right:h.offset().left-a("#content").offset().left};document.documentElement.clientWidth<930?b.position="static":i>f+68?(b.position="absolute",b.right=50,b.top=0,b.bottom="auto"):i+j-l<f+68?(b.position="absolute",b.bottom=0,b.top="auto",b.right=50):(b.position="fixed",b.top=68,b.right=h.offset().left),cache.$article_sidebar.css(b)}}},41);if(a("body").hasClass("article")){cache.$article_header=a(".full-article header").first(),cache.$article_sidebar=a(".full-article .sidebar"),cache.$article_sidebar_asides=cache.$article_sidebar.find("aside"),cache.$article_text_wrappers=a(".full-article .text-wrapper"),a(window).on("load scroll resize",function(){document.documentElement.clientWidth<620?a("a.lightbox-wrapper").each(function(){var b=a(this).attr("href");"undefined"==typeof b&&b===!1||a(this).attr("data-href",b).removeAttr("href","").removeAttr("data-featherlight")}):a("a.lightbox-wrapper").each(function(){var b=a(this).data("href");"undefined"==typeof b&&b===!1||a(this).removeAttr("data-href","").attr("href",b).attr("data-featherlight","image")})});var c=a(".number");a.each(c,function(b,c){numberLength=a(this).text().length,a(this).addClass("number-length-"+numberLength)}),document.documentElement.clientWidth<930&&a(".layout-component-most-popular div").appendTo("#most-popular-mobile");var d=window.location.pathname;if(a("body").hasClass("admin-menu")||d.indexOf("/simple-preview/")>-1){var e=new Date();a(".featured-media img, .dnd-widget-wrapper img").each(function(b){var c=a(this).attr("src");c=removeExistingQuerystring(c),c+="?"+e.getTime(),c=referenceS3Location(c),a(this).attr("src",c)})}};a("time[datetime]").timeago()}),jQuery(document).ready(function(a){jQuery(".most-popular-toaster .most-popular-article.tab a").click(function(){var a=jQuery(this).attr("href"),b=s_gi(s_account);ga("send","event","Toaster","target",a),b.linkTrackVars="prop36",b.prop36="Toaster Click - "+a,b.tl(this,"o","Toaster Click")}),jQuery(".most-popular-toaster .most-popular-cancel.tab .buttons a").click(function(){var a=jQuery(this).attr("class"),b=s_gi(s_account);ga("send","event","Toaster","Cancel",a),b.linkTrackVars="prop36",b.prop36="Toaster Close - "+a,b.tl(this,"o","Toaster Close")}),jQuery(".layout-component-ines-sponsored-features-sidebar a").click(function(){var a=jQuery(this).attr("href"),b=jQuery(this).closest("li").index()+1,c=s_gi(s_account);ga("send","event","Sponsored Features",b,a),c.linkTrackVars="prop36",c.prop36="Sponsored Features - "+b+" - "+a,c.tl(this,"o","Sponsored Features")}),jQuery("a.email-signpost").click(function(){var a=jQuery(this).attr("href"),b=s_gi(s_account);ga("send","event","Email Signpost",a),b.linkTrackVars="prop36",b.prop36="Email Signpost - "+a,b.tl(this,"o","Email Signpost")}),jQuery(".video-playlist li a").click(function(){var a=jQuery(this).attr("href"),b=jQuery(this).closest("li").index()+1,c=s_gi(s_account);ga("send","event","Popular Videos",b,a),c.linkTrackVars="prop36",c.prop36="Popular Videos - "+b+" - "+a,c.tl(this,"o","Popular Videos")})}),function(a){a(document).ready(function(){a(".toggle-menu a").on("click",function(b){b.preventDefault();var c=a("body").hasClass("menu-visible");c?(a("body").removeClass("menu-visible"),a(window).scrollTop(window.scrollTopBeforeMenuShow)):(window.scrollTopBeforeMenuShow=parseInt(a(window).scrollTop()),a("body").addClass("menu-visible"),a(window).scrollTop(0)),a(this).toggleClass("icon-menu icon-close")})}),a(document).ready(function(){cache.is_article=a("body").hasClass("article"),cache.$dynamic_header_logotype=a("#dynamic-header .logotype"),cache.$dynamic_header_push=a("#dynamic-header .push"),cache.$dynamic_header_share=a("#dynamic-header .share"),cache.$masthead_logo=a("#masthead .logo"),a(window).scroll(function(){b()});var b=throttle(function(){var b=a(this).scrollTop();b>350&&(cache.is_article&&b<a(".full-article").height()?cache.$dynamic_header_share.hasClass("active")||(cache.$dynamic_header_logotype.removeClass("active"),cache.$masthead_logo.addClass("stamp-only"),cache.$dynamic_header_share.addClass("active"),cache.$dynamic_header_push.removeClass("active")):cache.$dynamic_header_push.hasClass("active")||(cache.$dynamic_header_logotype.removeClass("active"),cache.$masthead_logo.addClass("stamp-only"),cache.$dynamic_header_share.removeClass("active"),cache.$dynamic_header_push.addClass("active"))),b<=350&&!cache.$dynamic_header_logotype.hasClass("active")&&(cache.$dynamic_header_logotype.addClass("active"),cache.$masthead_logo.removeClass("stamp-only"),cache.$dynamic_header_share.removeClass("active"),cache.$dynamic_header_push.removeClass("active")),Drupal.behaviors.grid.weight_per_row<3||a("body").hasClass("menu-visible")||(b>30?(a("#masthead").addClass("thin"),a("body").addClass("masthead-thin")):b<=30&&(a("#masthead").removeClass("thin"),a("body").removeClass("masthead-thin")))},100)}),a(document).ready(function(){a("#menu .toggle").on("click",function(b){b.preventDefault(),a(this).parents("ul.topics li").toggleClass("expanded")})})}(jQuery),function(a){Drupal.behaviors.inesDropDown={attach:function(b,c){function d(b){a(".dropdown-menu.open, .search-form.open").removeClass("open"),a("#content, .toggle-menu").unbind("click",d)}
function e(b){timer=setTimeout(function(){a(b).addClass("sub-menu-open")},150)};a(".dropdown-toggle",b).on("click",function(b){b.preventDefault(),b.stopPropagation();var c=a(this).siblings(".dropdown-menu, .search-form");0!==c.length&&(c.hasClass("open")?d():(d(),c.addClass("open"),a("#content, .toggle-menu").bind("click",d)))}),a("header > nav > ol > li",b).hover(function(){e(a(this));var b=-((120-a(this).innerWidth())/2);a(this).find("ul").css("margin-left",b)},function(){clearTimeout(timer),a(this).removeClass("sub-menu-open")})}}}(jQuery),function(a){a(document).ready(function(){a(".calendar .toggle-year").on("click",function(b){b.preventDefault(),a(this).parents("li").first().toggleClass("expanded")})})}(jQuery),jQuery(".share_bar_block .number").each(function(){jQuery(this).parent().css({width:jQuery(this).width()}),jQuery(this).prop("Counter",0).animate({Counter:jQuery(this).text()},{duration:1e3,easing:"swing",step:function(a){jQuery(this).text(Math.ceil(a))}})}),cache.supports.localstorage&&"yes"!==localStorage.getItem("cookie_warning_shown")&&(jQuery("#cookie-warning").addClass("visible"),localStorage.setItem("cookie_warning_shown","yes"),jQuery("#cookie-warning .close").click(function(a){a.preventDefault(),jQuery("#cookie-warning").removeClass("visible")})),cache.supports.localstorage&&"yes"!==localStorage.getItem("trial_message_shown")&&(jQuery("#trial-message").addClass("visible"),localStorage.setItem("trial_message_shown","yes"),jQuery("#trial-message .close").click(function(a){a.preventDefault(),jQuery("#trial-message").removeClass("visible")})),function(a){a(document).ready(function(a){function b(b){top.location="#gallery";var d=a(".gallery-open .images li[data-gallery-item="+b+"]"),e=a(".gallery-open .legends li[data-gallery-legend="+b+"]");d.addClass("active"),e.addClass("active");var f=!1;d.lazyload({skip_invisible:!1,effect:"hide",load:function(a,b){f=!0,h()}}),f||c(d),d.nextAll(":lt(2)").lazyload({skip_invisible:!1,effect:"hide"}),d.prevAll(":lt(2)").lazyload({skip_invisible:!1,effect:"hide"}),$last_item=a(".gallery-open .images").find("li").last(),$last_item.lazyload({skip_invisible:!1,effect:"hide"}),$last_item.prev().lazyload({skip_invisible:!1,effect:"hide"}),g(b)}
function c(a){var b=a.attr("data-original"),c={"background-image":'url("'+b+'")'};a.css(c),h()}
function d(){var b=a(".gallery-open .images").find(".active"),d=b.next();d.length?d.addClass("active"):(a(".gallery-open .images").find("li").removeClass("active"),d=a(".gallery-open .images").find("li").first(),d.addClass("active")),b.removeClass("active");var e=!1;d.lazyload({skip_invisible:!1,effect:"hide",load:function(a,b){h()}}),e||c(d),d.nextAll(":lt(3)").each(function(){a(this).lazyload({skip_invisible:!1,effect:"hide"})});var f=a(".gallery-open .images").find("li").index(d);a(".gallery-open .legends .active").removeClass("active"),a(".gallery-open .legends li").eq(f).addClass("active"),g(f+1)}
function e(){var b=a(".gallery-open .images").find(".active"),d=b.prev();d.length?d.addClass("active"):(a(".gallery-open .images").find("li").removeClass("active"),d=a(".gallery-open .images").find("li").last(),d.addClass("active")),b.removeClass("active");var e=!1;d.lazyload({skip_invisible:!1,effect:"hide",load:function(a,b){h()}}),e||c(d),d.prevAll(":lt(3)").each(function(){a(this).lazyload({skip_invisible:!1,effect:"hide"})});var f=a(".gallery-open .images").find("li").index(d);a(".gallery-open .legends .active").removeClass("active"),a(".gallery-open .legends li").eq(f).addClass("active"),g(f+1)}
function f(){a("body").removeClass("fullscreen-gallery"),a(".gallery-open").removeClass("gallery-open")}
function g(b){if("undefined"!=typeof s_gi){var c=s_gi(s_account);c.linkTrackVars="prop2,prop8,prop10,prop15,prop21",c.linkTrackEvents="event3";var d=a(".grid-mod-gallery");c.prop21=d.attr("data-scald-gallery")+" | "+b,c.events="event3","standard_theme"==Drupal.settings.themeName?(c.prop10="",c.prop2="Gallery"):"independent_theme"==Drupal.settings.themeName&&(c.prop15="",c.prop8="Gallery"),c.t(),c.prop2=c.prop21=c.events=c.prop10=""};var e=location.href,f=location.pathname;cbPagepath=f,e.indexOf("homesandproperty.co.uk")>=0?f+="?gallery_view":f=f+"?slide_num="+b;ga("send","pageview",f),b%3===0&&"undefined"!=typeof googletag&&googletag.cmd.push(function(){googletag.pubads().refresh([gptAdSlots.mpu5])});var g=_sf_async_config.sections,g=g.replace("non-gallery","gallery"),h=a('meta[name="twitter:title"]').attr("content");_sf_async_config.sections=g,pSUPERFLY.virtualPage(cbPagepath,h),self.COMSCORE&&COMSCORE.beacon({c1:"2",c2:"10476312"})}
function h(){var b,c,d,e,f,g=a(".gallery-open .images").find(".active");b=a(window).width()>929?a(window).width()-340:a(window).width(),c=a(window).height()-64,d=g.attr("data-original"),d?(e=new Image(),e.src=d,e.onload=function(){f=b/this.width*this.height,0==this.width||0==this.height?f=1e3:f>c&&(f=c),a(".gallery-open .images").css("height",f)}):(f=1e3,a(".gallery-open .images").css("height",f))};a(".grid-mod-gallery a").on("click",function(c){if(c.preventDefault(),window.addEventListener("orientationchange",h),"undefined"!=typeof googletag){a(".mpu5-container").html('<div id="mpu5"></div>');var d="mpu5";"undefined"!=typeof gptAdSlots[d]&&(console.log("googletag display: "+d),googletag.display(d),googletag.pubads().refresh([gptAdSlots[d]]))};a("body").addClass("fullscreen-gallery");var e=a(this).parents(".grid-mod-gallery").next(".full-gallery");e.addClass("gallery-open"),"undefined"!=typeof a(this).attr("data-gallery-thumb")?(a(".gallery-open .images li").removeClass("active"),a(".gallery-open .legends li").removeClass("active"),a(this).parents("article").find(".show-all").removeClass("initial-open"),b(a(this).attr("data-gallery-thumb"))):a(this).hasClass("initial-open")&&(a(this).removeClass("initial-open"),b(1))}),a(window).on("hashchange",function(b){"#gallery"===location.hash||a("body").hasClass("fullscreen-gallery")&&f()}),a(".full-gallery .next").on("click",function(a){a.preventDefault(),d()}),a(".full-gallery .prev").on("click",function(a){a.preventDefault(),e()}),a(".full-gallery .close").on("click",function(a){a.preventDefault(),f()}),a(document).keyup(function(b){a("body").hasClass("fullscreen-gallery")&&(37===b.which&&e(),39===b.which&&d(),27===b.which&&f())})})}(jQuery),jQuery(document).ready(function(a){a(".edition ul a").click(function(){var b=a(this).data("edition");createCookie("Locale",b,365),a("body").hasClass("front")&&"US"===b?window.location.assign("/us"):a("body").hasClass("section-us")&&"UK"===b?window.location.assign("/"):window.location.reload(!0)}),a("#masthead #dynamic-header > a").click(function(a){a.preventDefault();getCookie("Locale");"US"===getCookie("Locale")?window.location.assign("/us"):window.location.assign("/")})}),function(a){function b(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)};return""}
function c(){return e=window.pageYOffset,f=e>g?"down":"up",g=e,f};var d=function(d){a.getJSON(d,function(d){function e(a){var b=Math.floor((new Date().getTime()-a)/1e3),c=Math.floor(b/31536e3);return c>1?c+" years":(c=Math.floor(b/2592e3),c>1?c+" months":(c=Math.floor(b/86400),c>1?c+" days":(c=Math.floor(b/3600),c>=1?(c=Math.round(b/3600),c+" hours"):(c=Math.floor(b/60),c>=1?c+" minutes":Math.floor(b)+" seconds"))))};cache.$populararticles=d.articles;var f;article=cache.$populararticles[0],article.link==window.location&&(article=cache.$populararticles[1]),published=article.publish_date.replace(/-/g,"/"),published=Date.parse(published),"undefined"!=typeof article.image?image=article.image.thumbnail:image="#",f='<li class="most-popular-article tab"><div class="most-popular-label">Top story</div><a href="'+article.link+'"><span class="image" style="background-image: url(\''+image+'\')"></span><div class="most-popular-text"><p>'+article.short_headline+"</p><p>"+e(published)+'</p></a></div><a href="#" id="most-popular-cancel"><span class="close">Close </span></a></li>',hidehtml='<li class="most-popular-cancel tab"><p>Do you want to hide popular articles just this time or forever?</p><div class="buttons"><ul><li><a href="#" id="most-popular-hide-once">Hide this time</a></li><li><a href="#" id="most-popular-hide-forever">Hide Forever</a></li><li><a href="#" id="most-popular-hide-cancel">Cancel</a></li></ul></div></li>',a(".most-popular-toaster").html("<ul>"+f+hidehtml+"</ul>"),a(window).on("resize",function(){window.innerWidth>=929?a(".most-popular-toaster").css("right",0):a(".most-popular-toaster").css("left",window.innerWidth/2-150)}),window.innerWidth>=929?a(".most-popular-toaster").css("right",0):a(".most-popular-toaster").css("left",window.innerWidth/2-150),a("#most-popular-cancel").on("click",function(b){b.preventDefault(b);var c={left:"-300px"};a(".most-popular-toaster li.tab").css(c)}),a("#most-popular-hide-once").on("click",function(b){b.preventDefault(b);var c=new Date();c.setTime(c.getTime()+864e5);var d="expires="+c.toUTCString();document.cookie="most-popular=dismissed;"+d+";path=/ ",a(".most-popular-toaster").removeClass("visible")}),a("#most-popular-hide-forever").on("click",function(b){b.stopPropagation(b);var c=new Date();c.setTime(c.getTime()+2592e6);var d="expires="+c.toUTCString();document.cookie="most-popular=dismissed;"+d+";path=/ ",a(".most-popular-toaster").removeClass("visible"),b.stopPropagation(b)}),a("#most-popular-hide-cancel").on("click",function(b){b.preventDefault(b);var c={left:"0px"};a(".most-popular-toaster li.tab").css(c)}),a(".most-popular-toaster .most-popular-article.tab a").click(function(){var b=a(this).attr("href"),c=s_gi(s_account);ga("send","event","Toaster","target",b),c.linkTrackVars="prop36",c.prop36="Toaster Click - "+b,c.tl(this,"o","Toaster Click")}),a(".most-popular-toaster .most-popular-cancel.tab .buttons a").click(function(){var b=a(this).attr("class"),c=s_gi(s_account);ga("send","event","Toaster","Cancel",b),c.linkTrackVars="prop36",c.prop36="Toaster Close - "+b,c.tl(this,"o","Toaster Close")});var g=function(){a(".most-popular-toaster").addClass("visible");var c=new Date();c.setTime(c.getTime()+864e5);var d="expires="+c.toUTCString();""==b("most-popular")&&(document.cookie="most-popular=seen;"+d+";path=/ ")};a(window).on("scroll",function(){var d=c();"dismissed"!=b("most-popular")&&("up"==d?g():($btn=a("#gigya-share-btns-2"),$btn.length>0&&(sharebuttonposition=$btn.offset().top,scrollposition=a(window).scrollTop(),windowheight=a(window).height(),scrollposition+windowheight>sharebuttonposition?g():a(".most-popular-toaster").removeClass("visible"))))})})};a(window).on("load",function(){var a=Drupal.settings.most_popular_feed;"seen"!=b("most-popular")&&"dismissed"!=b("most-popular")&&"undefined"!=typeof a&&d(a)});var e,f,g=0;a(document).ready(function(){window.location.href.indexOf("standard")>-1&&a(window).width()<420&&a(".most-popular-toaster").hide()})}(jQuery);var sticky_leaderboard=function(){var a=jQuery("#leaderboard").find("iframe"),b=a.attr("src");if("undefined"!=typeof b&&b.indexOf("richmedia")==-1){var c=a.height()+40;a&&a.height()>10&&jQuery("#leaderboard").attr("style","min-height:"+c+"px;position: relative; margin-bottom: 5px"),jQuery(window).on("scroll",function(){var b=jQuery(window).scrollTop(),d={};b+a.height()>c?(d.left=(jQuery("#leaderboard").width()-a.width())/2,d.position="absolute",d.bottom=0):(d.left=(jQuery(window).width()-a.width())/2,d.position="fixed",d.bottom=""),a.css(d)})}},sticky_mpu=function(){var a=jQuery(".sidebar #mpu0").find("iframe");if(jQuery(".dark-background figure .bc_container .video-js").length&&!jQuery("body").hasClass("admin-menu"))var b=!0;if(a.length){var c=a.height();jQuery("#mpu0").offset().top;jQuery(".sidebar #mpu0").css("position","relative"),jQuery(".sidebar #mpu0").css("overflow","hidden"),250==c?(jQuery(".sidebar #mpu0").animate({height:"600px"},3e3),jQuery(window).on("scroll",function(){var c=jQuery(window).scrollTop(),d=jQuery("#mpu0").offset().top,e=c+50-d;1==b&&(e+=210),e>=0&&e<350?(a.css("position","fixed"),a.css("top",50)):e<0?(a.css("position","absolute"),a.css("top",0)):(a.css("position","absolute"),a.css("top",350))})):600==c&&(jQuery(".sidebar #mpu0").animate({height:"800px"},3e3),jQuery(window).on("scroll",function(){var c=jQuery(window).scrollTop(),d=jQuery("#mpu0").offset().top,e=c+50-d;1==b&&(e+=210),e>=0&&e<200?(a.css("position","fixed"),a.css("top",50)):e<0?(a.css("position","absolute"),a.css("top",0)):(a.css("position","absolute"),a.css("top",200))}))}},sticky_leader=function(){console.log("run leader");var a=jQuery("#leaderboard").find("iframe"),b=jQuery("body").css("backgroundColor");if(jQuery("#leaderboard").is(":visible")&&"undefined"==typeof stickyMe&&a){var c=0;$("#leaderboard").find("iframe").each(function(a){var b=$(this).height();50!=b&&90!=b&&250!=b||(c=b)}),c>10?(jQuery("#leaderboard").css({"min-height":c+111,position:"fixed",top:0,"z-index":"95",background:b,width:"100%",margin:"0 auto","padding-top":"100px","padding-bottom":"10px","border-bottom":"1px solid rgba(242, 242, 242, 1)",display:""}),jQuery("#leaderboard").addClass("stickied"),jQuery(".ad-leaderboard").css({"min-height":a.height()+20}),setTimeout(function(){var b=jQuery(window).scrollTop();0!=b&&jQuery("#leaderboard").fadeTo("fast",0),setTimeout(function(){jQuery("#leaderboard").fadeTo("fast",1),jQuery("#leaderboard").css({"min-height":a.height(),position:"relative","z-index":"95","padding-top":"0px","padding-bottom":"0px","border-bottom":"0px solid rgba(242, 242, 242, 0)",background:"none"})},700)},5e3)):jQuery("#leaderboard").hasClass("stickied")||setTimeout(function(){sticky_leader()},1e3)}},sticky_side=function(){var a=jQuery(".sidebar #mpu0").find("iframe");if(a.length){if(jQuery(".dark-background figure .bc_container .video-js").length&&!jQuery("body").hasClass("admin-menu"))var b=!0;var c=a.height(),d=(jQuery(".sidebar").offset().top,jQuery(".sidebar")),e=jQuery(".main-content-column").height(),f=0;jQuery(".sidebar").css("position","relative"),jQuery(".sidebar").css("overflow","hidden"),jQuery(".right-hand-column").css({height:e}),c>=250&&jQuery(window).on("scroll",function(){var a=jQuery(window).scrollTop(),c=jQuery(".right-hand-column").offset().top,e=a+50-c,g=jQuery(".sidebar").height(),h=jQuery(".right-hand-column").height(),i=h-g,j=50;1==b&&(e+=210,j+=210);var k=function(){setTimeout(function(){f=1;var a=jQuery(".sidebar").offset().top,b=jQuery(".right-hand-column").offset().top;jQuery(".sidebar").css({position:"relative",top:a-b})},6e3)};e>=0&&e<i&&0==f?(d.css("position","fixed"),d.css("top",j),k()):e<0&&0==f?(d.css("position","absolute"),d.css("top",0)):0==f&&(d.css("position","absolute"),d.css("top",i))})}};jQuery(window).load(function(){console.log("win load"),"undefined"==typeof stickyMe&&setTimeout(function(){sticky_leader()},1e3),"undefined"==typeof stickyMpu&&jQuery(".main-content-column").height()>jQuery(".sidebar").height()?sticky_side():sticky_mpu()});var sticky_video=function(){function a(){b.removeClass("sticky"),f.removeClass("sticky"),g.removeClass("sticky"),h.removeClass("sticky"),jQuery(".video-popout-text").remove(),d.removeAttr("style"),jQuery(".video-popout-close").remove()};var b=jQuery(".dark-background figure"),c=jQuery(".dark-background");if(video_bg_height=c.height(),video_article_headline=jQuery('meta[name="twitter:title"]').attr("content"),jQuery(".video-playlist").length){var d=jQuery(".video-playlist")}else var d=jQuery(".full-article .article-wrapper");var e=d.offset().top;b.wrap("<div class='video-popout-wrap'></div>"),b.wrap("<div class='video-popout-inner'></div>");var f=jQuery(".video-popout-wrap"),g=jQuery(".video-popout-inner"),h=jQuery(".video-popout-wrap .bc_container"),i=b.height(),j=1;jQuery(window).on("scroll",function(){var c=jQuery(window).scrollTop(),k=c-e/1.5;if(jQuery("body").on("click",".video-popout-close",function(){j=0,a()}),k>=0){if((l=1===j)&&(window.innerHeight>window.innerWidth||window.innerWidth>760)){b.addClass("sticky"),jQuery(".video-playlist").length?d.css({"margin-top":i+45}):d.css({"margin-top":i+85}),f.addClass("sticky"),g.addClass("sticky"),h.addClass("sticky"),jQuery(".video-popout-text").length||(jQuery('<div class="video-popout-close"><img src="../../../sites/all/themes/ines_themes/independent_theme/img/close-video-preroll.svg"/></div>').insertAfter(b),jQuery('<div class="video-popout-text">'+video_article_headline+"</div>").insertAfter(b));var l="yes"}}else k<0&&(l="yes")&&a()})};jQuery(document).ready(function(){jQuery("body").hasClass("admin-menu")||"video"!=pageType||!jQuery(".dark-background figure .bc_container .video-js").length||/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||sticky_video()}),jQuery(document).ready(function(a){function b(a){if("undefined"!=typeof s_gi){var b=s_gi(s_account);b.prop29=a,b.events="event13",b.t(),b.prop29=b.events=""}};a(".relatedlinkslist").once("click-tracking",function(){var c=a(".related",this);c.on("click","a",function(c){var d=a(this).parent().prevAll().length,e=a(this).html(),f="Position "+d+" - "+e;b(f)})})}),function(a){a(document).ready(function(){a('.adblock-notice [data-toggle="instructions"]').click(function(){a(".adblock-notice .main").hide(),a(".adblock-notice .instructions").show(),a(window).trigger("resize")})})}(jQuery),function(a){Drupal.behaviors.bestMegaNav={attach:function(b,c){a(".sub-nav > button").on("click",function(b){a(".sub-nav > ul").slideToggle(),a(this).toggleClass("active")}),a(".mega-nav > li .toggle").click(function(){a(window).width()<920&&(a(this).parent("li").hasClass("menu-open")?a(this).parent("li").removeClass("menu-open"):(a(this).closest("ul").find("li").removeClass("menu-open"),a(this).parent("li").addClass("menu-open")))}),a(".mega-nav > li > a").hover(function(){if(!(a(window).width()<920)){var b,c=a(window).width()-40,d=a(this).position(),e=a(this).nextAll(".menu");e.addClass("menu-open"),b=d.left<40?d.left:d.left-40,e.width()+b>c&&(b=c-e.width()),e.css("left",b)}},function(){a(this).nextAll(".menu").removeClass("menu-open")}),a(window).resize(function(){a(window).width()>=920&&(a(".mega-nav .menu-open").removeClass("menu-open"),a(".mega-nav").removeAttr("style"))})}}}(jQuery);var videoPlayerListen=function(){var a=Object.keys(videojs.players),b=a.length;if(b>1)for(var c=0;c<b;c++){var d=videojs(a[c]),d=d.id_;videoPlayerEvent(d)}};jQuery(document).ready(function(){"undefined"!=typeof videojs&&videoPlayerListen()}),function(a,b){b.behaviors.inesExplainer={attach:function(b,c){var d,e,f;a(".article-explainer").once(function(){d=a(".explainer-open"),e=a("#explainer-list .item-list"),f=a("a.explainer-question"),d.on("click",function(){e.css("display","block")}),f.on("click",function(){e.hide();var b=a(location).attr("pathname")+a(this).attr("href");window.location.href=b}),a(window).load(function(){var b=a(".explainer-open"),c=b.offset();a(window).on("scroll",function(b){a(this).scrollTop()>c.top+48?a(".explainer-open").addClass("fixed"):a(".explainer-open").removeClass("fixed")})})})}}}(jQuery,Drupal);;
/* Source and licensing information for the above line(s) can be found at http://www.independent.co.uk/sites/all/themes/ines_themes/ines_theme/js/main.js. */
